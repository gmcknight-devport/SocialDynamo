{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\glenn\\\\Documents\\\\GitHub\\\\SocialDynamo\\\\SocialDynamo\\\\Frontend\\\\react-frontend\\\\src\\\\components\\\\profile\\\\ProfileHeader.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useLayoutEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport './ProfileHeader.css';\nimport UserModal from '../modals/UserModal';\nimport EditProfileModal from '../modals/EditProfileModal';\nimport RefreshLogin from '../../util/RefreshLogin';\nimport { Avatar } from '@mui/material';\nimport { toast } from \"react-toastify\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function ProfileHeader(_ref) {\n  _s();\n  var _JSON$parse;\n  let {\n    userId\n  } = _ref;\n  const loggedInUserId = ((_JSON$parse = JSON.parse(localStorage.getItem('userId'))) === null || _JSON$parse === void 0 ? void 0 : _JSON$parse.userId) || null;\n  const isLoggedInUserProfile = userId === loggedInUserId ? true : false;\n  const url = JSON.parse(localStorage.getItem('url')) || null;\n  const [imageUrl, setImageUrl] = useState('');\n  const avatarStyle = {\n    width: \"16vh\",\n    height: \"16vh\"\n  };\n  const navigate = useNavigate();\n  const [userData, setUserData] = useState('');\n  const [followers, setFollowers] = useState('');\n  const [followerCount, setFollowerCount] = useState(0);\n  const [following, setFollowing] = useState('');\n  const [followingCount, setFollowingCount] = useState(0);\n  const [isCurrentFollower, setIsCurrentFollower] = useState(false);\n  useEffect(async () => {\n    const fetchData = async () => {\n      await fetchProfileInformation();\n      await fetchFollowers();\n      await fetchFollowing();\n    };\n    await fetchData();\n  }, []);\n\n  //Call to get profile information from API\n  const fetchProfileInformation = async () => {\n    try {\n      //Fetch data\n      const response = await fetch(url + `/account/Profile/${userId}`, {\n        method: 'GET',\n        mode: 'cors',\n        credentials: 'include',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n\n      //Handle different responses\n      if (response.ok) {\n        const responseJson = await response.json();\n        setUserData(responseJson);\n        await fetchPictureFromBlob(responseJson.profilePicture);\n      } else if (response.status === 401) {\n        if (!(await RefreshLogin(navigate))) return true;\n        fetchProfileInformation();\n      } else {\n        displayError(response.title);\n      }\n    } catch (error) {\n      displayError(\"Unexpected error occurred, unable to fetch user profile.\");\n      console.log(error);\n    }\n  };\n\n  //Get url for profile picture\n  const fetchPictureFromBlob = async image => {\n    const img = `data:image/jpeg;base64,${image}`;\n    setImageUrl(img);\n  };\n\n  //Call to get user follower information from API\n  const fetchFollowers = async () => {\n    try {\n      //Fetch data\n      const response = await fetch(url + `/account/followers/${userId}`, {\n        method: 'GET',\n        mode: 'cors',\n        credentials: 'include',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n\n      //Handle different responses\n      if (response.ok) {\n        if (!response.headers.get('content-type').includes('application/json')) return;\n        const responseJson = await response.json();\n        setFollowers(responseJson);\n        setFollowerCount(responseJson.length);\n\n        //Check if logged in user already follows profile\n        if (!isLoggedInUserProfile) {\n          responseJson.forEach((user, index) => {\n            if (user.userId === loggedInUserId) setIsCurrentFollower(true);\n          });\n        }\n      } else if (response.status === 401) {\n        if (!(await RefreshLogin(navigate))) return true;\n        fetchFollowers();\n      } else {\n        displayError(response.title);\n      }\n    } catch (error) {\n      displayError(\"Unexpected error occurred, unable to fetch followers.\");\n      console.log(error);\n    }\n  };\n\n  //Call to get user follower information from API\n  const fetchFollowing = async () => {\n    try {\n      //Fetch data\n      const response = await fetch(url + `/account/following/${userId}`, {\n        method: 'GET',\n        mode: 'cors',\n        credentials: 'include',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n\n      //Handle different responses\n      if (response.ok) {\n        if (!response.headers.get('content-type').includes('application/json')) {\n          setFollowingCount(0);\n          return;\n        }\n        const responseJson = await response.json();\n        setFollowing(responseJson);\n        setFollowingCount(responseJson.length);\n      } else if (response.status === 401) {\n        if (!(await RefreshLogin(navigate))) return true;\n        fetchFollowing();\n      } else {\n        displayError(response.title);\n      }\n    } catch (error) {\n      displayError(\"Unexpected error occurred, unable to fetch following.\");\n      console.log(error);\n    }\n  };\n  const followUser = async () => {\n    const followerId = loggedInUserId;\n    const objMap = {\n      userId,\n      followerId\n    };\n    const finalBody = JSON.stringify(objMap);\n    try {\n      //Fetch data\n      const response = await fetch(url + '/account/addfollower', {\n        method: 'PUT',\n        mode: 'cors',\n        credentials: 'include',\n        body: finalBody,\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n\n      //Handle different responses\n      if (response.ok) {\n        setIsCurrentFollower(!isCurrentFollower);\n        if (isCurrentFollower) {\n          setFollowerCount(followers.length - 1);\n          setFollowers(prevState => prevState.filter(follower => follower.userId !== loggedInUserId));\n          return;\n        }\n        const newFollower = await fetchNewFollowerInfo();\n        setFollowerCount(followers.length + 1);\n        setFollowers(prevState => [...prevState, newFollower]);\n      } else if (response.status === 401) {\n        if (!(await RefreshLogin(navigate))) return true;\n        followUser();\n      } else {\n        displayError(response.title);\n      }\n    } catch (error) {\n      displayError(\"Unexpected error occurred, please try again.\");\n      console.log(error);\n    }\n  };\n  const fetchNewFollowerInfo = async () => {\n    try {\n      //Fetch data\n      const response = await fetch(url + `/account/Profile/${loggedInUserId}`, {\n        method: 'GET',\n        mode: 'cors',\n        credentials: 'include',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n\n      //Handle different responses\n      if (response.ok) {\n        const responseJson = await response.json();\n        const newFollower = {\n          profilePicture: responseJson.profilePicture,\n          forename: responseJson.forename,\n          surname: responseJson.surname,\n          userId: loggedInUserId\n        };\n        return newFollower;\n      } else if (response.status === 401) {\n        if (!(await RefreshLogin(navigate))) return true;\n        fetchProfileInformation();\n      } else {\n        console.log(response.title);\n      }\n    } catch (error) {\n      displayError(\"Unexpected error occurred, unable to fetch user profile.\");\n      console.log(error);\n    }\n  };\n  const displayError = message => {\n    toast.error(message);\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile-header-container\",\n      children: userData && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"profile-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"profile-picture\",\n          children: imageUrl && /*#__PURE__*/_jsxDEV(Avatar, {\n            src: imageUrl,\n            sx: avatarStyle\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"follow-followers\",\n          children: /*#__PURE__*/_jsxDEV(UserModal, {\n            title: \"Followers\",\n            data: followers,\n            buttonComponent: /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [followerCount, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 242,\n                columnNumber: 63\n              }, this), \"Followers\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 242,\n              columnNumber: 42\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"follow-following\",\n          children: /*#__PURE__*/_jsxDEV(UserModal, {\n            title: \"Following\",\n            data: following,\n            buttonComponent: /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [followingCount, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 249,\n                columnNumber: 64\n              }, this), \"Following\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 249,\n              columnNumber: 42\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"follow-button-container\",\n          children: !isLoggedInUserProfile && /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"follow-button\",\n            onClick: followUser,\n            children: !isCurrentFollower ? /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Follow\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 255,\n              columnNumber: 51\n            }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Following\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 255,\n              columnNumber: 73\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 254,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"user-details\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"span-name\",\n            children: userData.forename + ' ' + userData.surname\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 261,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"span-userid\",\n            children: userId\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 263,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"span-description\",\n          children: userData.profileDescription\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 17\n        }, this), isLoggedInUserProfile && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"edit-button\",\n          children: /*#__PURE__*/_jsxDEV(EditProfileModal, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 9\n    }, this)\n  }, void 0, false);\n}\n_s(ProfileHeader, \"beTQ/lZrikoPEQimPtSKY/3Bo9U=\", false, function () {\n  return [useNavigate];\n});\n_c = ProfileHeader;\nvar _c;\n$RefreshReg$(_c, \"ProfileHeader\");","map":{"version":3,"names":["React","useState","useEffect","useLayoutEffect","useNavigate","UserModal","EditProfileModal","RefreshLogin","Avatar","toast","jsxDEV","_jsxDEV","Fragment","_Fragment","ProfileHeader","_ref","_s","_JSON$parse","userId","loggedInUserId","JSON","parse","localStorage","getItem","isLoggedInUserProfile","url","imageUrl","setImageUrl","avatarStyle","width","height","navigate","userData","setUserData","followers","setFollowers","followerCount","setFollowerCount","following","setFollowing","followingCount","setFollowingCount","isCurrentFollower","setIsCurrentFollower","fetchData","fetchProfileInformation","fetchFollowers","fetchFollowing","response","fetch","method","mode","credentials","headers","ok","responseJson","json","fetchPictureFromBlob","profilePicture","status","displayError","title","error","console","log","image","img","get","includes","length","forEach","user","index","followUser","followerId","objMap","finalBody","stringify","body","prevState","filter","follower","newFollower","fetchNewFollowerInfo","forename","surname","message","children","className","src","sx","fileName","_jsxFileName","lineNumber","columnNumber","data","buttonComponent","onClick","profileDescription","_c","$RefreshReg$"],"sources":["C:/Users/glenn/Documents/GitHub/SocialDynamo/SocialDynamo/Frontend/react-frontend/src/components/profile/ProfileHeader.js"],"sourcesContent":["import React, {useState, useEffect, useLayoutEffect} from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport './ProfileHeader.css';\r\nimport UserModal from '../modals/UserModal';\r\nimport EditProfileModal from '../modals/EditProfileModal';\r\nimport RefreshLogin from '../../util/RefreshLogin';\r\nimport { Avatar } from '@mui/material';\r\nimport { toast } from \"react-toastify\";\r\n\r\nexport default function ProfileHeader({userId}) {\r\n    const loggedInUserId = JSON.parse(localStorage.getItem('userId'))?.userId || null;\r\n    const isLoggedInUserProfile = userId === loggedInUserId ? true : false;\r\n    const url = JSON.parse(localStorage.getItem('url')) || null;\r\n    const [imageUrl, setImageUrl] = useState('');\r\n    const avatarStyle = {width: \"16vh\", height: \"16vh\"};\r\n    const navigate = useNavigate();\r\n\r\n    const [userData, setUserData] = useState('');\r\n    const [followers, setFollowers] = useState('');\r\n    const [followerCount, setFollowerCount] = useState(0);    \r\n    const [following, setFollowing] = useState('');\r\n    const [followingCount, setFollowingCount] = useState(0);\r\n    const [isCurrentFollower, setIsCurrentFollower] = useState(false);\r\n\r\n    useEffect(async () => {        \r\n        const fetchData = async () => {                               \r\n            await fetchProfileInformation(); \r\n            await fetchFollowers();\r\n            await fetchFollowing();\r\n        }\r\n\r\n        await fetchData();\r\n    }, []);\r\n\r\n    //Call to get profile information from API\r\n    const fetchProfileInformation = async () => {\r\n        try{\r\n            //Fetch data\r\n            const response = await fetch(url + `/account/Profile/${userId}`, {\r\n                method: 'GET',\r\n                mode: 'cors',\r\n                credentials: 'include',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                },\r\n            });\r\n            \r\n            //Handle different responses\r\n            if (response.ok) {\r\n                const responseJson = await response.json();\r\n                setUserData(responseJson);   \r\n                await fetchPictureFromBlob(responseJson.profilePicture);     \r\n            } else if (response.status === 401){\r\n                if(!await RefreshLogin(navigate)) return true;\r\n                fetchProfileInformation();\r\n            } else {\r\n                displayError(response.title);\r\n            }\r\n        }catch(error){\r\n            displayError(\"Unexpected error occurred, unable to fetch user profile.\");\r\n            console.log(error);\r\n        }\r\n    }\r\n\r\n    //Get url for profile picture\r\n    const fetchPictureFromBlob = async (image) => {\r\n        const img = `data:image/jpeg;base64,${image}`;\r\n        setImageUrl(img);\r\n    };\r\n   \r\n    //Call to get user follower information from API\r\n    const fetchFollowers = async () => {\r\n        try{\r\n            //Fetch data\r\n            const response = await fetch(url + `/account/followers/${userId}`, {\r\n                method: 'GET',\r\n                mode: 'cors',\r\n                credentials: 'include',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                },\r\n            });\r\n            \r\n            //Handle different responses\r\n            if (response.ok) {\r\n                if(!response.headers.get('content-type').includes('application/json')) return;\r\n          \r\n                const responseJson = await response.json();          \r\n                setFollowers(responseJson);\r\n                setFollowerCount(responseJson.length)\r\n\r\n                //Check if logged in user already follows profile\r\n                if(!isLoggedInUserProfile){\r\n                    responseJson.forEach((user, index) =>{\r\n                        if(user.userId === loggedInUserId)\r\n                            setIsCurrentFollower(true);\r\n                    });\r\n                }\r\n            } else if (response.status === 401){\r\n                if(!await RefreshLogin(navigate)) return true;\r\n                fetchFollowers();\r\n            }else {\r\n                displayError(response.title);\r\n            }\r\n        }catch(error){\r\n            displayError(\"Unexpected error occurred, unable to fetch followers.\");\r\n            console.log(error);\r\n        }\r\n    }\r\n\r\n    //Call to get user follower information from API\r\n    const fetchFollowing = async () => {\r\n        try{\r\n            //Fetch data\r\n            const response = await fetch(url + `/account/following/${userId}`, {\r\n                method: 'GET',\r\n                mode: 'cors',\r\n                credentials: 'include',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                },\r\n            });\r\n            \r\n            //Handle different responses\r\n            if (response.ok) {\r\n                if(!response.headers.get('content-type').includes('application/json')){\r\n                    setFollowingCount(0);\r\n                    return;\r\n                }\r\n          \r\n                const responseJson = await response.json();\r\n                setFollowing(responseJson);\r\n                setFollowingCount(responseJson.length);\r\n            } else if (response.status === 401){\r\n                if(!await RefreshLogin(navigate)) return true;\r\n                fetchFollowing();\r\n            }else {\r\n                displayError(response.title);\r\n            }\r\n        }catch(error){\r\n            displayError(\"Unexpected error occurred, unable to fetch following.\");\r\n            console.log(error);\r\n        }\r\n    }\r\n\r\n    const followUser = async () => {\r\n        const followerId = loggedInUserId;\r\n        const objMap = { userId, followerId };\r\n        const finalBody = JSON.stringify(objMap);\r\n\r\n        try{\r\n            //Fetch data\r\n            const response = await fetch(url + '/account/addfollower', {\r\n                method: 'PUT',\r\n                mode: 'cors',\r\n                credentials: 'include',\r\n                body: finalBody,\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                },\r\n            });\r\n            \r\n            //Handle different responses\r\n            if (response.ok) {\r\n                setIsCurrentFollower(!isCurrentFollower);\r\n\r\n                if (isCurrentFollower) {\r\n                    setFollowerCount(followers.length - 1);\r\n                    setFollowers((prevState) => prevState.filter(follower => follower.userId !== loggedInUserId));\r\n                    return;\r\n                } \r\n\r\n                const newFollower = await fetchNewFollowerInfo();\r\n                setFollowerCount(followers.length + 1);\r\n                setFollowers((prevState) => [...prevState, newFollower]);\r\n                \r\n            } else if (response.status === 401){\r\n                if(!await RefreshLogin(navigate)) return true;\r\n                followUser();\r\n            }else {            \r\n                displayError(response.title)\r\n            }\r\n        }catch(error){\r\n            displayError(\"Unexpected error occurred, please try again.\");\r\n            console.log(error)\r\n        }\r\n    }\r\n\r\n    const fetchNewFollowerInfo = async () => {\r\n        try{\r\n            //Fetch data\r\n            const response = await fetch(url + `/account/Profile/${loggedInUserId}`, {\r\n                method: 'GET',\r\n                mode: 'cors',\r\n                credentials: 'include',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                },\r\n            });\r\n            \r\n            //Handle different responses\r\n            if(response.ok){\r\n                const responseJson = await response.json(); \r\n                const newFollower = {\r\n                    profilePicture: responseJson.profilePicture,\r\n                    forename: responseJson.forename,\r\n                    surname: responseJson.surname,\r\n                    userId: loggedInUserId\r\n                };\r\n\r\n                return newFollower;\r\n            }else if (response.status === 401){\r\n                if(!await RefreshLogin(navigate)) return true;\r\n                fetchProfileInformation();\r\n            } else{\r\n                console.log(response.title);\r\n            }            \r\n        }catch(error){\r\n            displayError(\"Unexpected error occurred, unable to fetch user profile.\");\r\n            console.log(error);\r\n        }\r\n    }\r\n\r\n    const displayError = (message) => {\r\n        toast.error(message);\r\n    }\r\n\r\n    return (\r\n        <>    \r\n        <div className='profile-header-container'> \r\n        {userData &&         \r\n            <div className='profile-header'>                \r\n                <div className='profile-picture'> \r\n                    {imageUrl && (\r\n                        <Avatar src={imageUrl} sx={avatarStyle}/>\r\n                    )}                \r\n                </div>          \r\n                <div className='follow-followers'>\r\n                    <UserModal\r\n                        title=\"Followers\"\r\n                        data={followers}\r\n                        buttonComponent={<span>{followerCount}<br/>Followers</span>}\r\n                    />\r\n                </div>                    \r\n                <div className='follow-following'>\r\n                    <UserModal\r\n                        title=\"Following\"\r\n                        data={following}                        \r\n                        buttonComponent={<span>{followingCount}<br/>Following</span>}\r\n                    />     \r\n                </div>            \r\n                <div className='follow-button-container'>\r\n                    {!isLoggedInUserProfile && (                            \r\n                        <button className='follow-button' onClick={followUser}> \r\n                            {!isCurrentFollower ? <span>Follow</span> : <span>Following</span>}\r\n                        </button>                            \r\n                    )}\r\n                </div>  \r\n                <div className='user-details'>                                   \r\n                    <span className='span-name'>{userData.forename + ' ' + userData.surname}</span>\r\n                    <br/>\r\n                    <span className='span-userid'>{userId}</span>\r\n                    <br/>\r\n                </div> \r\n                <p className='span-description'>{userData.profileDescription}</p>\r\n                <br/>\r\n\r\n                {isLoggedInUserProfile && (  \r\n                    <div className='edit-button'>                      \r\n                        <EditProfileModal/>\r\n                    </div>\r\n                )}\r\n            </div>    \r\n            }\r\n        </div>  \r\n        </>\r\n    )\r\n}"],"mappings":";;AAAA,OAAOA,KAAK,IAAGC,QAAQ,EAAEC,SAAS,EAAEC,eAAe,QAAO,OAAO;AACjE,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,OAAO,qBAAqB;AAC5B,OAAOC,SAAS,MAAM,qBAAqB;AAC3C,OAAOC,gBAAgB,MAAM,4BAA4B;AACzD,OAAOC,YAAY,MAAM,yBAAyB;AAClD,SAASC,MAAM,QAAQ,eAAe;AACtC,SAASC,KAAK,QAAQ,gBAAgB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAAA,SAAAC,QAAA,IAAAC,SAAA;AAEvC,eAAe,SAASC,aAAaA,CAAAC,IAAA,EAAW;EAAAC,EAAA;EAAA,IAAAC,WAAA;EAAA,IAAV;IAACC;EAAM,CAAC,GAAAH,IAAA;EAC1C,MAAMI,cAAc,GAAG,EAAAF,WAAA,GAAAG,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC,CAAC,cAAAN,WAAA,uBAA1CA,WAAA,CAA4CC,MAAM,KAAI,IAAI;EACjF,MAAMM,qBAAqB,GAAGN,MAAM,KAAKC,cAAc,GAAG,IAAI,GAAG,KAAK;EACtE,MAAMM,GAAG,GAAGL,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,KAAK,CAAC,CAAC,IAAI,IAAI;EAC3D,MAAM,CAACG,QAAQ,EAAEC,WAAW,CAAC,GAAG1B,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM2B,WAAW,GAAG;IAACC,KAAK,EAAE,MAAM;IAAEC,MAAM,EAAE;EAAM,CAAC;EACnD,MAAMC,QAAQ,GAAG3B,WAAW,CAAC,CAAC;EAE9B,MAAM,CAAC4B,QAAQ,EAAEC,WAAW,CAAC,GAAGhC,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACiC,SAAS,EAAEC,YAAY,CAAC,GAAGlC,QAAQ,CAAC,EAAE,CAAC;EAC9C,MAAM,CAACmC,aAAa,EAAEC,gBAAgB,CAAC,GAAGpC,QAAQ,CAAC,CAAC,CAAC;EACrD,MAAM,CAACqC,SAAS,EAAEC,YAAY,CAAC,GAAGtC,QAAQ,CAAC,EAAE,CAAC;EAC9C,MAAM,CAACuC,cAAc,EAAEC,iBAAiB,CAAC,GAAGxC,QAAQ,CAAC,CAAC,CAAC;EACvD,MAAM,CAACyC,iBAAiB,EAAEC,oBAAoB,CAAC,GAAG1C,QAAQ,CAAC,KAAK,CAAC;EAEjEC,SAAS,CAAC,YAAY;IAClB,MAAM0C,SAAS,GAAG,MAAAA,CAAA,KAAY;MAC1B,MAAMC,uBAAuB,CAAC,CAAC;MAC/B,MAAMC,cAAc,CAAC,CAAC;MACtB,MAAMC,cAAc,CAAC,CAAC;IAC1B,CAAC;IAED,MAAMH,SAAS,CAAC,CAAC;EACrB,CAAC,EAAE,EAAE,CAAC;;EAEN;EACA,MAAMC,uBAAuB,GAAG,MAAAA,CAAA,KAAY;IACxC,IAAG;MACC;MACA,MAAMG,QAAQ,GAAG,MAAMC,KAAK,CAACxB,GAAG,GAAI,oBAAmBP,MAAO,EAAC,EAAE;QAC7DgC,MAAM,EAAE,KAAK;QACbC,IAAI,EAAE,MAAM;QACZC,WAAW,EAAE,SAAS;QACtBC,OAAO,EAAE;UACL,cAAc,EAAE;QACpB;MACJ,CAAC,CAAC;;MAEF;MACA,IAAIL,QAAQ,CAACM,EAAE,EAAE;QACb,MAAMC,YAAY,GAAG,MAAMP,QAAQ,CAACQ,IAAI,CAAC,CAAC;QAC1CvB,WAAW,CAACsB,YAAY,CAAC;QACzB,MAAME,oBAAoB,CAACF,YAAY,CAACG,cAAc,CAAC;MAC3D,CAAC,MAAM,IAAIV,QAAQ,CAACW,MAAM,KAAK,GAAG,EAAC;QAC/B,IAAG,EAAC,MAAMpD,YAAY,CAACwB,QAAQ,CAAC,GAAE,OAAO,IAAI;QAC7Cc,uBAAuB,CAAC,CAAC;MAC7B,CAAC,MAAM;QACHe,YAAY,CAACZ,QAAQ,CAACa,KAAK,CAAC;MAChC;IACJ,CAAC,QAAMC,KAAK,EAAC;MACTF,YAAY,CAAC,0DAA0D,CAAC;MACxEG,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;IACtB;EACJ,CAAC;;EAED;EACA,MAAML,oBAAoB,GAAG,MAAOQ,KAAK,IAAK;IAC1C,MAAMC,GAAG,GAAI,0BAAyBD,KAAM,EAAC;IAC7CtC,WAAW,CAACuC,GAAG,CAAC;EACpB,CAAC;;EAED;EACA,MAAMpB,cAAc,GAAG,MAAAA,CAAA,KAAY;IAC/B,IAAG;MACC;MACA,MAAME,QAAQ,GAAG,MAAMC,KAAK,CAACxB,GAAG,GAAI,sBAAqBP,MAAO,EAAC,EAAE;QAC/DgC,MAAM,EAAE,KAAK;QACbC,IAAI,EAAE,MAAM;QACZC,WAAW,EAAE,SAAS;QACtBC,OAAO,EAAE;UACL,cAAc,EAAE;QACpB;MACJ,CAAC,CAAC;;MAEF;MACA,IAAIL,QAAQ,CAACM,EAAE,EAAE;QACb,IAAG,CAACN,QAAQ,CAACK,OAAO,CAACc,GAAG,CAAC,cAAc,CAAC,CAACC,QAAQ,CAAC,kBAAkB,CAAC,EAAE;QAEvE,MAAMb,YAAY,GAAG,MAAMP,QAAQ,CAACQ,IAAI,CAAC,CAAC;QAC1CrB,YAAY,CAACoB,YAAY,CAAC;QAC1BlB,gBAAgB,CAACkB,YAAY,CAACc,MAAM,CAAC;;QAErC;QACA,IAAG,CAAC7C,qBAAqB,EAAC;UACtB+B,YAAY,CAACe,OAAO,CAAC,CAACC,IAAI,EAAEC,KAAK,KAAI;YACjC,IAAGD,IAAI,CAACrD,MAAM,KAAKC,cAAc,EAC7BwB,oBAAoB,CAAC,IAAI,CAAC;UAClC,CAAC,CAAC;QACN;MACJ,CAAC,MAAM,IAAIK,QAAQ,CAACW,MAAM,KAAK,GAAG,EAAC;QAC/B,IAAG,EAAC,MAAMpD,YAAY,CAACwB,QAAQ,CAAC,GAAE,OAAO,IAAI;QAC7Ce,cAAc,CAAC,CAAC;MACpB,CAAC,MAAK;QACFc,YAAY,CAACZ,QAAQ,CAACa,KAAK,CAAC;MAChC;IACJ,CAAC,QAAMC,KAAK,EAAC;MACTF,YAAY,CAAC,uDAAuD,CAAC;MACrEG,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;IACtB;EACJ,CAAC;;EAED;EACA,MAAMf,cAAc,GAAG,MAAAA,CAAA,KAAY;IAC/B,IAAG;MACC;MACA,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACxB,GAAG,GAAI,sBAAqBP,MAAO,EAAC,EAAE;QAC/DgC,MAAM,EAAE,KAAK;QACbC,IAAI,EAAE,MAAM;QACZC,WAAW,EAAE,SAAS;QACtBC,OAAO,EAAE;UACL,cAAc,EAAE;QACpB;MACJ,CAAC,CAAC;;MAEF;MACA,IAAIL,QAAQ,CAACM,EAAE,EAAE;QACb,IAAG,CAACN,QAAQ,CAACK,OAAO,CAACc,GAAG,CAAC,cAAc,CAAC,CAACC,QAAQ,CAAC,kBAAkB,CAAC,EAAC;UAClE3B,iBAAiB,CAAC,CAAC,CAAC;UACpB;QACJ;QAEA,MAAMc,YAAY,GAAG,MAAMP,QAAQ,CAACQ,IAAI,CAAC,CAAC;QAC1CjB,YAAY,CAACgB,YAAY,CAAC;QAC1Bd,iBAAiB,CAACc,YAAY,CAACc,MAAM,CAAC;MAC1C,CAAC,MAAM,IAAIrB,QAAQ,CAACW,MAAM,KAAK,GAAG,EAAC;QAC/B,IAAG,EAAC,MAAMpD,YAAY,CAACwB,QAAQ,CAAC,GAAE,OAAO,IAAI;QAC7CgB,cAAc,CAAC,CAAC;MACpB,CAAC,MAAK;QACFa,YAAY,CAACZ,QAAQ,CAACa,KAAK,CAAC;MAChC;IACJ,CAAC,QAAMC,KAAK,EAAC;MACTF,YAAY,CAAC,uDAAuD,CAAC;MACrEG,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;IACtB;EACJ,CAAC;EAED,MAAMW,UAAU,GAAG,MAAAA,CAAA,KAAY;IAC3B,MAAMC,UAAU,GAAGvD,cAAc;IACjC,MAAMwD,MAAM,GAAG;MAAEzD,MAAM;MAAEwD;IAAW,CAAC;IACrC,MAAME,SAAS,GAAGxD,IAAI,CAACyD,SAAS,CAACF,MAAM,CAAC;IAExC,IAAG;MACC;MACA,MAAM3B,QAAQ,GAAG,MAAMC,KAAK,CAACxB,GAAG,GAAG,sBAAsB,EAAE;QACvDyB,MAAM,EAAE,KAAK;QACbC,IAAI,EAAE,MAAM;QACZC,WAAW,EAAE,SAAS;QACtB0B,IAAI,EAAEF,SAAS;QACfvB,OAAO,EAAE;UACL,cAAc,EAAE;QACpB;MACJ,CAAC,CAAC;;MAEF;MACA,IAAIL,QAAQ,CAACM,EAAE,EAAE;QACbX,oBAAoB,CAAC,CAACD,iBAAiB,CAAC;QAExC,IAAIA,iBAAiB,EAAE;UACnBL,gBAAgB,CAACH,SAAS,CAACmC,MAAM,GAAG,CAAC,CAAC;UACtClC,YAAY,CAAE4C,SAAS,IAAKA,SAAS,CAACC,MAAM,CAACC,QAAQ,IAAIA,QAAQ,CAAC/D,MAAM,KAAKC,cAAc,CAAC,CAAC;UAC7F;QACJ;QAEA,MAAM+D,WAAW,GAAG,MAAMC,oBAAoB,CAAC,CAAC;QAChD9C,gBAAgB,CAACH,SAAS,CAACmC,MAAM,GAAG,CAAC,CAAC;QACtClC,YAAY,CAAE4C,SAAS,IAAK,CAAC,GAAGA,SAAS,EAAEG,WAAW,CAAC,CAAC;MAE5D,CAAC,MAAM,IAAIlC,QAAQ,CAACW,MAAM,KAAK,GAAG,EAAC;QAC/B,IAAG,EAAC,MAAMpD,YAAY,CAACwB,QAAQ,CAAC,GAAE,OAAO,IAAI;QAC7C0C,UAAU,CAAC,CAAC;MAChB,CAAC,MAAK;QACFb,YAAY,CAACZ,QAAQ,CAACa,KAAK,CAAC;MAChC;IACJ,CAAC,QAAMC,KAAK,EAAC;MACTF,YAAY,CAAC,8CAA8C,CAAC;MAC5DG,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;IACtB;EACJ,CAAC;EAED,MAAMqB,oBAAoB,GAAG,MAAAA,CAAA,KAAY;IACrC,IAAG;MACC;MACA,MAAMnC,QAAQ,GAAG,MAAMC,KAAK,CAACxB,GAAG,GAAI,oBAAmBN,cAAe,EAAC,EAAE;QACrE+B,MAAM,EAAE,KAAK;QACbC,IAAI,EAAE,MAAM;QACZC,WAAW,EAAE,SAAS;QACtBC,OAAO,EAAE;UACL,cAAc,EAAE;QACpB;MACJ,CAAC,CAAC;;MAEF;MACA,IAAGL,QAAQ,CAACM,EAAE,EAAC;QACX,MAAMC,YAAY,GAAG,MAAMP,QAAQ,CAACQ,IAAI,CAAC,CAAC;QAC1C,MAAM0B,WAAW,GAAG;UAChBxB,cAAc,EAAEH,YAAY,CAACG,cAAc;UAC3C0B,QAAQ,EAAE7B,YAAY,CAAC6B,QAAQ;UAC/BC,OAAO,EAAE9B,YAAY,CAAC8B,OAAO;UAC7BnE,MAAM,EAAEC;QACZ,CAAC;QAED,OAAO+D,WAAW;MACtB,CAAC,MAAK,IAAIlC,QAAQ,CAACW,MAAM,KAAK,GAAG,EAAC;QAC9B,IAAG,EAAC,MAAMpD,YAAY,CAACwB,QAAQ,CAAC,GAAE,OAAO,IAAI;QAC7Cc,uBAAuB,CAAC,CAAC;MAC7B,CAAC,MAAK;QACFkB,OAAO,CAACC,GAAG,CAAChB,QAAQ,CAACa,KAAK,CAAC;MAC/B;IACJ,CAAC,QAAMC,KAAK,EAAC;MACTF,YAAY,CAAC,0DAA0D,CAAC;MACxEG,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;IACtB;EACJ,CAAC;EAED,MAAMF,YAAY,GAAI0B,OAAO,IAAK;IAC9B7E,KAAK,CAACqD,KAAK,CAACwB,OAAO,CAAC;EACxB,CAAC;EAED,oBACI3E,OAAA,CAAAE,SAAA;IAAA0E,QAAA,eACA5E,OAAA;MAAK6E,SAAS,EAAC,0BAA0B;MAAAD,QAAA,EACxCvD,QAAQ,iBACLrB,OAAA;QAAK6E,SAAS,EAAC,gBAAgB;QAAAD,QAAA,gBAC3B5E,OAAA;UAAK6E,SAAS,EAAC,iBAAiB;UAAAD,QAAA,EAC3B7D,QAAQ,iBACLf,OAAA,CAACH,MAAM;YAACiF,GAAG,EAAE/D,QAAS;YAACgE,EAAE,EAAE9D;UAAY;YAAA+D,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAC;QAC3C;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACA,CAAC,eACNnF,OAAA;UAAK6E,SAAS,EAAC,kBAAkB;UAAAD,QAAA,eAC7B5E,OAAA,CAACN,SAAS;YACNwD,KAAK,EAAC,WAAW;YACjBkC,IAAI,EAAE7D,SAAU;YAChB8D,eAAe,eAAErF,OAAA;cAAA4E,QAAA,GAAOnD,aAAa,eAACzB,OAAA;gBAAAgF,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,aAAS;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM;UAAE;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC/D;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACD,CAAC,eACNnF,OAAA;UAAK6E,SAAS,EAAC,kBAAkB;UAAAD,QAAA,eAC7B5E,OAAA,CAACN,SAAS;YACNwD,KAAK,EAAC,WAAW;YACjBkC,IAAI,EAAEzD,SAAU;YAChB0D,eAAe,eAAErF,OAAA;cAAA4E,QAAA,GAAO/C,cAAc,eAAC7B,OAAA;gBAAAgF,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,aAAS;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM;UAAE;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAChE;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACD,CAAC,eACNnF,OAAA;UAAK6E,SAAS,EAAC,yBAAyB;UAAAD,QAAA,EACnC,CAAC/D,qBAAqB,iBACnBb,OAAA;YAAQ6E,SAAS,EAAC,eAAe;YAACS,OAAO,EAAExB,UAAW;YAAAc,QAAA,EACjD,CAAC7C,iBAAiB,gBAAG/B,OAAA;cAAA4E,QAAA,EAAM;YAAM;cAAAI,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC,gBAAGnF,OAAA;cAAA4E,QAAA,EAAM;YAAS;cAAAI,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC9D;QACX;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACA,CAAC,eACNnF,OAAA;UAAK6E,SAAS,EAAC,cAAc;UAAAD,QAAA,gBACzB5E,OAAA;YAAM6E,SAAS,EAAC,WAAW;YAAAD,QAAA,EAAEvD,QAAQ,CAACoD,QAAQ,GAAG,GAAG,GAAGpD,QAAQ,CAACqD;UAAO;YAAAM,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC,eAC/EnF,OAAA;YAAAgF,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eACLnF,OAAA;YAAM6E,SAAS,EAAC,aAAa;YAAAD,QAAA,EAAErE;UAAM;YAAAyE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC,eAC7CnF,OAAA;YAAAgF,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACJ,CAAC,eACNnF,OAAA;UAAG6E,SAAS,EAAC,kBAAkB;UAAAD,QAAA,EAAEvD,QAAQ,CAACkE;QAAkB;UAAAP,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eACjEnF,OAAA;UAAAgF,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,EAEJtE,qBAAqB,iBAClBb,OAAA;UAAK6E,SAAS,EAAC,aAAa;UAAAD,QAAA,eACxB5E,OAAA,CAACL,gBAAgB;YAAAqF,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAC;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAClB,CACR;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACA;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAEL;EAAC,gBACJ,CAAC;AAEX;AAAC9E,EAAA,CA5QuBF,aAAa;EAAA,QAMhBV,WAAW;AAAA;AAAA+F,EAAA,GANRrF,aAAa;AAAA,IAAAqF,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}