{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\glenn\\\\Documents\\\\GitHub\\\\SocialDynamo\\\\SocialDynamo\\\\Frontend\\\\react-frontend\\\\src\\\\components\\\\post\\\\Post.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { useNavigate, Link } from 'react-router-dom';\nimport \"./Post.css\";\nimport CommentsModal from \"../modals/CommentsModal\";\nimport UserModal from \"../modals/UserModal\";\nimport UserHeader from \"../UserHeader\";\nimport CreateImageObject from \"../../util/CreateImageObject\";\nimport RefreshLogin from \"../../util/RefreshLogin\";\nimport \"./ImageGallery.css\";\nimport ImageGallery from \"react-image-gallery\";\nimport ConfirmDelete from \"../ConfirmDelete\";\nimport styled from 'styled-components';\nimport { toast } from \"react-toastify\";\nimport ArrowCircleLeftIcon from '@mui/icons-material/ArrowCircleLeft';\nimport ArrowCircleRightIcon from '@mui/icons-material/ArrowCircleRight';\nimport FavoriteBorderIcon from \"@mui/icons-material/FavoriteBorder\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Post(_ref) {\n  _s();\n  var _JSON$parse;\n  let {\n    post,\n    onDelete\n  } = _ref;\n  const loggedInUserId = ((_JSON$parse = JSON.parse(localStorage.getItem('userId'))) === null || _JSON$parse === void 0 ? void 0 : _JSON$parse.userId) || null;\n  const isLoggedInUserProfile = post.userId === loggedInUserId ? true : false;\n  const url = JSON.parse(localStorage.getItem('url')) || null;\n  const profileRegex = new RegExp(`^https://socdyn.com/p/${loggedInUserId}(?:/.*)?$`, 'i');\n  const locationBeginsProfileString = profileRegex.test(window.location.href); //Allow delete action only on profile page\n  const [userLiked, setUserLiked] = useState(false);\n  const [numberLikes, setNumberLikes] = useState(post.likes.length);\n  const [likesData, setLikesData] = useState([]);\n  const [hasMultipleFiles, setHasMultipleFiles] = useState(false);\n  const navigate = useNavigate();\n  const maxWidth = window.innerWidth * 0.4;\n  const maxHeight = maxWidth / 3 * 4;\n  const [images, setImages] = useState([]);\n  const [largestImageHeight, setLargestImageHeight] = useState(maxHeight);\n  const [ImageContainer, setImageContainer] = useState(null);\n  const [imageContainerStyle, setImageContainerStyle] = useState({});\n  let debounceTimeout;\n\n  //Initialise multiple files const & images\n  useEffect(async () => {\n    setHasMultipleFiles(post.files.length > 1);\n    const fetchImages = async () => {\n      const result = await CreateImageObject(post.files);\n      setImages(result);\n    };\n    const hasUserLiked = async () => {\n      for (const like of post.likes) {\n        if (like.likeUserId === loggedInUserId) {\n          setUserLiked(true);\n        }\n      }\n    };\n    await fetchImages();\n    await hasUserLiked();\n  }, [post.files.length]);\n\n  //Separate useEffect to ensure images fetched before calculations\n  useEffect(() => {\n    let maxAdjustedHeight = 0;\n    if (images.length > 0) {\n      // Calculate the adjusted height for each image based on the original aspect ratio\n      const adjustedHeights = images.map(image => {\n        const aspectRatio = image.width / (image.height || 1);\n        const adjustedHeight = Math.min(maxHeight, parseInt(maxWidth / aspectRatio));\n        return isFinite(adjustedHeight) ? adjustedHeight : 0;\n      });\n\n      // Filter out NaN or infinite values\n      const validHeights = adjustedHeights.filter(height => isFinite(height));\n      if (validHeights.length > 0) {\n        // Find the maximum adjusted height among all valid heights\n        maxAdjustedHeight = Math.max(...validHeights);\n        setLargestImageHeight(`${maxAdjustedHeight}px`);\n      } else {\n        setLargestImageHeight(0); // Reset to 0 if there are no valid heights\n      }\n    } else {\n      setLargestImageHeight(0); // Reset to 0 if there are no images\n    }\n\n    //Ensure correct styling\n    const imgCont = styled.div`    \n      .image-gallery-content,\n      .image-gallery-image,\n      .image-gallery-slides {\n        width: 100%;\n        aspect-ratio: 4/3;\n        max-width: ${_ref2 => {\n      let {\n        maxWidth\n      } = _ref2;\n      return maxWidth;\n    }}px !important; /* Ensure image takes up full width */\n        object-fit: contain;\n      }\n      .image-gallery-slides {\n        border-radius: 5px;\n      }\n    \n      @media (max-width: 600px) {\n        .image-gallery-content,\n        .image-gallery-image,\n        .image-gallery-slides {\n          max-width: 100% !important; /* Ensure image takes up full width on mobile */\n          width: 100%;\n          height: auto;\n        }\n      }\n    `;\n\n    //Styling if no images\n    const isMobile = window.innerWidth <= 600;\n    const containerStyle = images.length === 0 ? {\n      width: `${maxWidth}px`\n    } : {\n      maxWidth: isMobile ? '100%' : `${maxWidth}px`,\n      width: isMobile ? '100%' : `${maxWidth}px`,\n      maxHeight: `auto`,\n      objectFit: 'contain'\n    };\n    setImageContainerStyle(containerStyle);\n    setImageContainer(imgCont);\n  }, [images]);\n\n  //Handle post like\n  const handleLikeClick = async () => {\n    if (debounceTimeout) {\n      clearTimeout(debounceTimeout);\n    }\n    debounceTimeout = setTimeout(async () => {\n      const postId = post.postId;\n      const likeUserId = loggedInUserId;\n      const objMap = {\n        postId,\n        likeUserId\n      };\n      const finalBody = JSON.stringify(objMap);\n      likePost(finalBody);\n    }, 300);\n  };\n  const likePost = async finalBody => {\n    try {\n      //Send data\n      const response = await fetch(url + '/posts/likepost', {\n        method: 'PUT',\n        mode: 'cors',\n        credentials: 'include',\n        body: finalBody,\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      if (response.ok) {\n        // Update the local state of likes\n        setUserLiked(userLiked => !userLiked);\n        const newLikes = userLiked ? numberLikes - 1 : numberLikes + 1;\n        setNumberLikes(newLikes);\n        return;\n      } else if (response.status === 401) {\n        if (!(await RefreshLogin(navigate))) return true;\n        handleLikeClick();\n      } else {\n        displayError(\"Unexpected error occurred, please try again.\");\n        console.log(response.title);\n      }\n    } catch (error) {\n      displayError(\"Unexpected error occurred, please try again.\");\n      console.log(error);\n    }\n  };\n\n  //Fetch current likes from API\n  const fetchPostLikes = async () => {\n    const userIds = post.likes.map(like => like.likeUserId);\n    if (userLiked && !userIds.includes(loggedInUserId)) {\n      userIds.push(loggedInUserId);\n    }\n    const finalBody = JSON.stringify(userIds);\n\n    //Ensure token is valid\n    if (!(await RefreshLogin(navigate))) return;\n    try {\n      //Send data           \n      const response = await fetch(url + '/account/Profiles', {\n        method: 'PUT',\n        mode: 'cors',\n        credentials: 'include',\n        body: finalBody,\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      if (response.ok) {\n        if (!response.headers.get('content-type').includes('application/json')) {\n          displayError(\"Couldn't find likes\");\n          return;\n        }\n        const data = await response.json();\n\n        //Map response and update\n        const processedData = data.map((item, index) => ({\n          userId: userIds[index],\n          forename: item.forename,\n          surname: item.surname,\n          profilePicture: item.profilePicture\n        }));\n        setLikesData(processedData);\n      }\n    } catch (error) {\n      displayError(\"Unexpected error occurred, unable to fetch post likes.\");\n      console.log(error);\n    }\n  };\n\n  //Handle delete post\n  const DeletePost = async () => {\n    await onDelete(post.postId);\n  };\n\n  //Custom rendering for left nav icon\n  function renderLeftNav(onClick, disabled) {\n    return /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"image-gallery-left-nav\",\n      disabled: disabled,\n      onClick: onClick,\n      style: {\n        outline: 'none'\n      },\n      children: /*#__PURE__*/_jsxDEV(ArrowCircleLeftIcon, {\n        className: \"left-icon\",\n        fontSize: \"large\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 7\n    }, this);\n  }\n  ;\n\n  //Custom render for right nav icon\n  function renderRightNav(onClick, disabled) {\n    return /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"image-gallery-right-nav\",\n      disabled: disabled,\n      onClick: onClick,\n      style: {\n        outline: 'none'\n      },\n      children: /*#__PURE__*/_jsxDEV(ArrowCircleRightIcon, {\n        className: \"right-icon\",\n        fontSize: \"large\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 7\n    }, this);\n  }\n  const displayError = message => {\n    toast.error(message);\n  };\n  const hashtagLink = async hashtag => {\n    const searchPath = `/search`;\n    const currentUrl = window.location.href;\n    const searchUrlRegex = /^https:\\/\\/socdyn\\.com\\/search(?:\\/|$)/;\n    if (searchUrlRegex.test(currentUrl)) {\n      navigate(searchPath, {\n        state: {\n          hashtag\n        }\n      });\n      window.location.reload();\n    } else {\n      navigate(searchPath, {\n        state: {\n          hashtag\n        }\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"post\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"post-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"post-header-left\",\n        children: /*#__PURE__*/_jsxDEV(UserHeader, {\n          profilePicture: post.profilePicture,\n          name: post.usersName,\n          userId: post.userId\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"post-header-right\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"delete-button-container\",\n          children: isLoggedInUserProfile && locationBeginsProfileString && /*#__PURE__*/_jsxDEV(ConfirmDelete, {\n            handleConfirmDelete: DeletePost\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 292,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cont\",\n      children: hasMultipleFiles ? /*#__PURE__*/_jsxDEV(ImageContainer, {\n        children: /*#__PURE__*/_jsxDEV(ImageGallery, {\n          items: images,\n          renderLeftNav: renderLeftNav,\n          renderRightNav: renderRightNav,\n          showPlayButton: false,\n          showFullscreenButton: false,\n          showThumbnails: false,\n          autoPlay: false,\n          disableKeyDown: true,\n          showBullets: true,\n          disableThumbnailScroll: true,\n          disableThumbnailSwipe: true,\n          infinite: false,\n          useBrowserFullscreen: false\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 299,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n        className: \"image\",\n        src: images.length > 0 ? images[0].original : '',\n        alt: images.length > 0 ? '' : 'Image not found',\n        style: imageContainerStyle\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"post-body\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"post-body-caption\",\n        children: post.caption\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"post-hashtag\",\n        onClick: () => hashtagLink(post.hashtag.substring(1)),\n        style: {\n          textDecoration: 'underline',\n          color: '#005c98',\n          cursor: 'pointer'\n        },\n        children: post.hashtag\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 324,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"post-footer\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"post-footer-icons\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: \"inline-block\"\n          },\n          children: /*#__PURE__*/_jsxDEV(FavoriteBorderIcon, {\n            onClick: handleLikeClick,\n            style: {\n              color: 'white',\n              fill: userLiked ? 'red' : 'white'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 336,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: \"inline-block\"\n          },\n          children: /*#__PURE__*/_jsxDEV(CommentsModal, {\n            postId: post.postId,\n            commentData: post.comments\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 342,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 341,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 334,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"post-footer-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"post-footer-left\",\n          children: /*#__PURE__*/_jsxDEV(UserModal, {\n            title: \"Likes\",\n            data: likesData,\n            buttonComponent: /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                color: '#005c98'\n              },\n              onClick: fetchPostLikes,\n              children: [numberLikes > 0 ? numberLikes : 0, \" likes\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 350,\n              columnNumber: 32\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 347,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"post-footer-right\",\n          children: post.postedAt.slice(0, 16).replace(\"T\", \" \")\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 345,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 333,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 284,\n    columnNumber: 5\n  }, this);\n}\n_s(Post, \"LYBhaUuTEtOOe1PyJ6wVlCMQ8LI=\", false, function () {\n  return [useNavigate];\n});\n_c = Post;\nvar _c;\n$RefreshReg$(_c, \"Post\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","Link","CommentsModal","UserModal","UserHeader","CreateImageObject","RefreshLogin","ImageGallery","ConfirmDelete","styled","toast","ArrowCircleLeftIcon","ArrowCircleRightIcon","FavoriteBorderIcon","jsxDEV","_jsxDEV","Post","_ref","_s","_JSON$parse","post","onDelete","loggedInUserId","JSON","parse","localStorage","getItem","userId","isLoggedInUserProfile","url","profileRegex","RegExp","locationBeginsProfileString","test","window","location","href","userLiked","setUserLiked","numberLikes","setNumberLikes","likes","length","likesData","setLikesData","hasMultipleFiles","setHasMultipleFiles","navigate","maxWidth","innerWidth","maxHeight","images","setImages","largestImageHeight","setLargestImageHeight","ImageContainer","setImageContainer","imageContainerStyle","setImageContainerStyle","debounceTimeout","files","fetchImages","result","hasUserLiked","like","likeUserId","maxAdjustedHeight","adjustedHeights","map","image","aspectRatio","width","height","adjustedHeight","Math","min","parseInt","isFinite","validHeights","filter","max","imgCont","div","_ref2","isMobile","containerStyle","objectFit","handleLikeClick","clearTimeout","setTimeout","postId","objMap","finalBody","stringify","likePost","response","fetch","method","mode","credentials","body","headers","ok","newLikes","status","displayError","console","log","title","error","fetchPostLikes","userIds","includes","push","get","data","json","processedData","item","index","forename","surname","profilePicture","DeletePost","renderLeftNav","onClick","disabled","className","style","outline","children","fontSize","fileName","_jsxFileName","lineNumber","columnNumber","renderRightNav","message","hashtagLink","hashtag","searchPath","currentUrl","searchUrlRegex","state","reload","name","usersName","handleConfirmDelete","items","showPlayButton","showFullscreenButton","showThumbnails","autoPlay","disableKeyDown","showBullets","disableThumbnailScroll","disableThumbnailSwipe","infinite","useBrowserFullscreen","src","original","alt","caption","substring","textDecoration","color","cursor","display","fill","commentData","comments","buttonComponent","postedAt","slice","replace","_c","$RefreshReg$"],"sources":["C:/Users/glenn/Documents/GitHub/SocialDynamo/SocialDynamo/Frontend/react-frontend/src/components/post/Post.js"],"sourcesContent":["import React, {useState, useEffect} from \"react\";\r\nimport { useNavigate, Link } from 'react-router-dom'; \r\nimport \"./Post.css\";\r\nimport CommentsModal from \"../modals/CommentsModal\";\r\nimport UserModal from \"../modals/UserModal\";\r\nimport UserHeader from \"../UserHeader\";\r\nimport CreateImageObject from \"../../util/CreateImageObject\";\r\nimport RefreshLogin from \"../../util/RefreshLogin\";\r\nimport \"./ImageGallery.css\";\r\nimport ImageGallery from \"react-image-gallery\";\r\nimport ConfirmDelete from \"../ConfirmDelete\";\r\nimport styled from 'styled-components'\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport ArrowCircleLeftIcon from '@mui/icons-material/ArrowCircleLeft';\r\nimport ArrowCircleRightIcon from '@mui/icons-material/ArrowCircleRight';\r\nimport FavoriteBorderIcon from \"@mui/icons-material/FavoriteBorder\";\r\n\r\nexport default function Post({ post, onDelete }) {\r\n  const loggedInUserId = JSON.parse(localStorage.getItem('userId'))?.userId || null;\r\n  const isLoggedInUserProfile = post.userId === loggedInUserId ? true : false;\r\n  const url = JSON.parse(localStorage.getItem('url')) || null;\r\n  const profileRegex = new RegExp(`^https://socdyn.com/p/${loggedInUserId}(?:/.*)?$`, 'i');\r\n  const locationBeginsProfileString = profileRegex.test(window.location.href);//Allow delete action only on profile page\r\n  const [userLiked, setUserLiked] = useState(false);  \r\n  const [numberLikes, setNumberLikes] = useState(post.likes.length);\r\n  const [likesData, setLikesData] = useState([]);\r\n  \r\n  const [hasMultipleFiles, setHasMultipleFiles] = useState(false)\r\n  const navigate = useNavigate();\r\n\r\n  const maxWidth = window.innerWidth * 0.4;\r\n  const maxHeight = (maxWidth / 3) * 4;\r\n  \r\n  const [images, setImages] = useState([]);\r\n  const [largestImageHeight, setLargestImageHeight] = useState(maxHeight);\r\n  const [ImageContainer, setImageContainer] =  useState(null);\r\n  const [imageContainerStyle, setImageContainerStyle] = useState({});\r\n\r\n  let debounceTimeout;\r\n\r\n  //Initialise multiple files const & images\r\n  useEffect(async () => {\r\n    setHasMultipleFiles(post.files.length > 1);\r\n    const fetchImages = async () => {\r\n      const result = await CreateImageObject(post.files);\r\n      setImages(result);\r\n    };\r\n\r\n    const hasUserLiked = async () => {\r\n      for(const like of post.likes){\r\n        if(like.likeUserId === loggedInUserId){\r\n          setUserLiked(true);\r\n        }\r\n      }\r\n    }\r\n\r\n    await fetchImages();\r\n    await hasUserLiked();\r\n\r\n  }, [post.files.length]);\r\n\r\n  //Separate useEffect to ensure images fetched before calculations\r\n  useEffect(() => {\r\n      let maxAdjustedHeight = 0;\r\n\r\n      if (images.length > 0) {\r\n            \r\n          // Calculate the adjusted height for each image based on the original aspect ratio\r\n          const adjustedHeights = images.map(image => {\r\n          const aspectRatio = image.width / (image.height || 1);          \r\n          const adjustedHeight = Math.min(maxHeight, parseInt(maxWidth / aspectRatio));\r\n\r\n          return isFinite(adjustedHeight) ? adjustedHeight : 0;\r\n        });\r\n    \r\n        // Filter out NaN or infinite values\r\n        const validHeights = adjustedHeights.filter(height => isFinite(height));\r\n    \r\n        if (validHeights.length > 0) {\r\n          // Find the maximum adjusted height among all valid heights\r\n          maxAdjustedHeight = Math.max(...validHeights);\r\n          setLargestImageHeight(`${maxAdjustedHeight}px`);\r\n        } else {\r\n          setLargestImageHeight(0); // Reset to 0 if there are no valid heights\r\n        }\r\n      } else {\r\n        setLargestImageHeight(0); // Reset to 0 if there are no images\r\n      }\r\n\r\n      //Ensure correct styling\r\n      const imgCont = styled.div`    \r\n      .image-gallery-content,\r\n      .image-gallery-image,\r\n      .image-gallery-slides {\r\n        width: 100%;\r\n        aspect-ratio: 4/3;\r\n        max-width: ${({ maxWidth }) => maxWidth}px !important; /* Ensure image takes up full width */\r\n        object-fit: contain;\r\n      }\r\n      .image-gallery-slides {\r\n        border-radius: 5px;\r\n      }\r\n    \r\n      @media (max-width: 600px) {\r\n        .image-gallery-content,\r\n        .image-gallery-image,\r\n        .image-gallery-slides {\r\n          max-width: 100% !important; /* Ensure image takes up full width on mobile */\r\n          width: 100%;\r\n          height: auto;\r\n        }\r\n      }\r\n    `;\r\n\r\n      //Styling if no images\r\n      const isMobile = window.innerWidth <= 600;\r\n      const containerStyle = images.length === 0\r\n      ? {\r\n          width: `${maxWidth}px`\r\n        }\r\n      : {\r\n          maxWidth: isMobile ? '100%' : `${maxWidth}px`,\r\n          width: isMobile ? '100%' : `${maxWidth}px`,\r\n          maxHeight: `auto`,\r\n          objectFit: 'contain'\r\n      };\r\n      setImageContainerStyle(containerStyle);      \r\n      setImageContainer(imgCont);\r\n\r\n  }, [images]);\r\n\r\n  //Handle post like\r\n  const handleLikeClick = async () => {\r\n\r\n    \r\n    \r\n    if (debounceTimeout) {\r\n      clearTimeout(debounceTimeout);\r\n    }\r\n\r\n    debounceTimeout = setTimeout(async () => {            \r\n      const postId = post.postId;\r\n      const likeUserId = loggedInUserId;\r\n      \r\n      const objMap = { postId, likeUserId };\r\n      const finalBody = JSON.stringify(objMap);\r\n\r\n      likePost(finalBody);\r\n    }, 300);\r\n  };\r\n\r\n  const likePost = async (finalBody) => {\r\n    try{\r\n      //Send data\r\n      const response = await fetch(url + '/posts/likepost', {\r\n        method: 'PUT',\r\n        mode: 'cors',\r\n        credentials: 'include',\r\n        body: finalBody,\r\n        headers: {\r\n            'Content-Type': 'application/json',\r\n        }\r\n      });\r\n\r\n      if(response.ok) {        \r\n        // Update the local state of likes\r\n        setUserLiked(userLiked => !userLiked);\r\n        const newLikes = userLiked ? numberLikes - 1 : numberLikes + 1;\r\n        setNumberLikes(newLikes);\r\n        \r\n        return;\r\n      }\r\n      else if(response.status === 401){\r\n        if(!await RefreshLogin(navigate)) return true;\r\n        handleLikeClick();\r\n      }else{\r\n        displayError(\"Unexpected error occurred, please try again.\");\r\n        console.log(response.title);\r\n      }\r\n    }catch(error){\r\n      displayError(\"Unexpected error occurred, please try again.\");\r\n      console.log(error);\r\n    }\r\n  }\r\n\r\n  //Fetch current likes from API\r\n  const fetchPostLikes = async () => {\r\n    const userIds = post.likes.map((like) => like.likeUserId);\r\n    if (userLiked && !userIds.includes(loggedInUserId)) {\r\n      userIds.push(loggedInUserId);\r\n    }\r\n\r\n    const finalBody = JSON.stringify(userIds);\r\n    \r\n    //Ensure token is valid\r\n    if(!await RefreshLogin(navigate)) return;\r\n    \r\n    try{\r\n      //Send data           \r\n      const response = await fetch(url + '/account/Profiles', {\r\n        method: 'PUT',\r\n        mode: 'cors',\r\n        credentials: 'include',\r\n        body: finalBody,\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        }\r\n      });\r\n\r\n      if(response.ok){\r\n        if(!response.headers.get('content-type').includes('application/json')) {\r\n          displayError(\"Couldn't find likes\");\r\n          return;           \r\n        }\r\n\r\n        const data = await response.json();\r\n\r\n        //Map response and update\r\n        const processedData = data.map((item, index) => ({\r\n          userId: userIds[index],\r\n          forename: item.forename,\r\n          surname: item.surname,\r\n          profilePicture: item.profilePicture\r\n        }));  \r\n\r\n        setLikesData(processedData);\r\n      }\r\n    }catch(error){\r\n      displayError(\"Unexpected error occurred, unable to fetch post likes.\");\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  //Handle delete post\r\n  const DeletePost = async () => {\r\n    await onDelete(post.postId);\r\n  }\r\n\r\n  //Custom rendering for left nav icon\r\n  function renderLeftNav(onClick, disabled) {\r\n    return (\r\n      <button\r\n        className='image-gallery-left-nav'\r\n        disabled={disabled}\r\n        onClick={onClick}\r\n        style={{outline: 'none'}}>\r\n        <ArrowCircleLeftIcon className='left-icon' fontSize=\"large\"/>\r\n      </button>\r\n    )\r\n  };\r\n\r\n  //Custom render for right nav icon\r\n  function renderRightNav(onClick, disabled) {\r\n    return (\r\n      <button        \r\n        className='image-gallery-right-nav'\r\n        disabled={disabled}\r\n        onClick={onClick}\r\n        style={{outline: 'none'}}>          \r\n        <ArrowCircleRightIcon className='right-icon' fontSize=\"large\"/>        \r\n      </button>\r\n    )\r\n  }\r\n    \r\n  const displayError = (message) => {\r\n    toast.error(message);\r\n  }\r\n\r\n  const hashtagLink = async (hashtag) => {\r\n    const searchPath = `/search`;\r\n    const currentUrl = window.location.href;\r\n    const searchUrlRegex = /^https:\\/\\/socdyn\\.com\\/search(?:\\/|$)/;\r\n\r\n    if (searchUrlRegex.test(currentUrl)) {\r\n      navigate(searchPath, {state: { hashtag } });\r\n      window.location.reload();\r\n    } else {\r\n      navigate(searchPath, {state: { hashtag } });\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"post\">\r\n      <div className=\"post-header\">  \r\n        <div className=\"post-header-left\">         \r\n          <UserHeader profilePicture={post.profilePicture} name={post.usersName} userId={post.userId}/> \r\n        </div>  \r\n        <div className=\"post-header-right\">\r\n          <div className='delete-button-container'>\r\n            {isLoggedInUserProfile && locationBeginsProfileString && (  \r\n              <ConfirmDelete handleConfirmDelete={DeletePost}/>\r\n            )}    \r\n          </div>\r\n        </div>          \r\n      </div>\r\n      <div className=\"cont\">\r\n        {hasMultipleFiles ? (\r\n          <ImageContainer>\r\n            <ImageGallery items={images} \r\n                renderLeftNav={renderLeftNav}\r\n                renderRightNav={renderRightNav}\r\n                showPlayButton={false}\r\n                showFullscreenButton={false}\r\n                showThumbnails={false}\r\n                autoPlay={false}\r\n                disableKeyDown={true}\r\n                showBullets={true}\r\n                disableThumbnailScroll={true}\r\n                disableThumbnailSwipe={true}\r\n                infinite={false}\r\n                useBrowserFullscreen={false}\r\n                />\r\n            </ImageContainer>\r\n        ) : (\r\n          <img\r\n            className=\"image\"\r\n            src={images.length > 0 ? images[0].original : ''}\r\n            alt={images.length > 0 ? '' : 'Image not found'}\r\n            style={imageContainerStyle}\r\n          />     \r\n        )}\r\n      </div>     \r\n      <div className=\"post-body\">\r\n          <h3 className=\"post-body-caption\">{post.caption}</h3>\r\n          <div className=\"post-hashtag\" onClick={() => hashtagLink(post.hashtag.substring(1))} \r\n            style={{ textDecoration: 'underline', \r\n            color: '#005c98',\r\n            cursor: 'pointer'}}>\r\n            {post.hashtag}\r\n          </div>          \r\n      </div>\r\n      <div className=\"post-footer\">\r\n        <div className=\"post-footer-icons\">  \r\n          <div style={{display: \"inline-block\"}}>    \r\n            <FavoriteBorderIcon \r\n              onClick={handleLikeClick} \r\n              style={{ color: 'white', fill: userLiked ? 'red' : 'white' }} \r\n            />\r\n          </div>\r\n          <div style={{display: \"inline-block\"}}>\r\n            <CommentsModal postId={post.postId} commentData={post.comments}/> \r\n          </div>                    \r\n        </div>     \r\n        <div className=\"post-footer-info\">\r\n          <div className=\"post-footer-left\">\r\n            <UserModal\r\n              title=\"Likes\"\r\n              data={likesData}\r\n              buttonComponent={<span style={{ color: '#005c98' }} onClick={fetchPostLikes}>{numberLikes > 0 ? numberLikes : 0} likes</span>}            \r\n            />\r\n          </div>\r\n          <div className=\"post-footer-right\">\r\n            {post.postedAt.slice(0, 16).replace(\"T\", \" \")}\r\n          </div>\r\n        </div>\r\n      </div>    \r\n    </div>\r\n  );  \r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}